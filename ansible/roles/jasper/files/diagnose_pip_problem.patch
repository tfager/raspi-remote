--- diagnose.py	2020-03-14 18:01:21.501928670 +0000
+++ diagnose.py.new	2020-03-14 18:02:56.491337034 +0000
@@ -6,7 +6,10 @@
 import subprocess
 import pkgutil
 import logging
-import pip.req
+try: # for pip >= 10
+    from pip._internal.req import parse_requirements
+except ImportError: # for pip <= 9.0.3
+    from pip.req import parse_requirements
 import jasperpath
 if sys.version_info < (3, 3):
     from distutils.spawn import find_executable
@@ -104,7 +107,7 @@
     """
     logger = logging.getLogger(__name__)
     if os.access(fname, os.R_OK):
-        reqs = list(pip.req.parse_requirements(fname))
+        reqs = list(parse_requirements(fname))
         logger.debug("Found %d PIP requirements in file '%s'", len(reqs),
                      fname)
         return reqs
